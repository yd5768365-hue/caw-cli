<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MechDesign</title>
    <script src="qrc:///qtwebchannel/qwebchannel.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0d1117, #161b22); color: #c9d1d9; min-height: 100vh; }
        .header { background: rgba(22,27,34,0.95); padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #30363d; }
        .logo { font-size: 28px; font-weight: bold; background: linear-gradient(90deg, #58a6ff, #a371f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .nav { display: flex; gap: 12px; }
        .nav-item { padding: 8px 16px; border-radius: 6px; cursor: pointer; color: #8b949e; font-size: 14px; }
        .nav-item:hover { background: rgba(88,166,255,0.1); }
        .nav-item.active { background: rgba(88,166,255,0.2); color: #58a6ff; }
        .container { padding: 30px; max-width: 1200px; margin: 0 auto; }
        .hero { text-align: center; padding: 30px 0; }
        .hero h1 { font-size: 48px; background: linear-gradient(90deg, #58a6ff, #a371f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .modules { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-top: 30px; }
        .module-card { background: linear-gradient(145deg, rgba(33,38,45,0.8), rgba(22,27,34,0.9)); border-radius: 12px; padding: 20px; border: 1px solid #30363d; cursor: pointer; transition: all 0.3s; }
        .module-card:hover { transform: translateY(-4px); border-color: #58a6ff; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .module-icon { font-size: 36px; margin-bottom: 12px; }
        .module-title { font-size: 18px; font-weight: bold; margin-bottom: 8px; color: #c9d1d9; }
        .module-desc { font-size: 13px; color: #8b949e; }
        .module-cmd { margin-top: 12px; padding: 6px 10px; background: rgba(0,0,0,0.3); border-radius: 4px; font-family: Consolas, monospace; font-size: 11px; color: #58a6ff; }
        .action-btns { display: flex; gap: 12px; justify-content: center; }
        .action-btn { padding: 10px 24px; background: linear-gradient(90deg, #238636, #2ea043); border: none; border-radius: 6px; color: white; font-size: 13px; cursor: pointer; }
        .action-btn:hover { transform: scale(1.05); }
        .click-hint { background: rgba(88,166,255,0.1); border: 1px solid rgba(88,166,255,0.3); border-radius: 6px; padding: 10px; margin-bottom: 16px; text-align: center; color: #58a6ff; font-size: 14px; }
        
        /* èŠå¤©é¡µé¢æ ·å¼ */
        #chat-page { display: none; height: calc(100vh - 60px); padding: 0; }
        .chat-container { display: flex; height: 100%; background: #0d1117; }
        .chat-sidebar { width: 280px; background: #161b22; border-right: 1px solid #30363d; padding: 20px; display: flex; flex-direction: column; }
        .chat-sidebar h3 { color: #58a6ff; font-size: 18px; margin-bottom: 20px; }
        .chat-sidebar-item { padding: 12px 16px; border-radius: 8px; cursor: pointer; color: #8b949e; margin-bottom: 8px; }
        .chat-sidebar-item:hover { background: rgba(88,166,255,0.1); }
        .chat-sidebar-item.active { background: rgba(88,166,255,0.2); color: #58a6ff; }
        .chat-quick-commands { margin-top: auto; padding-top: 20px; border-top: 1px solid #30363d; }
        .chat-quick-commands-title { font-size: 12px; color: #8b949e; margin-bottom: 8px; }
        .chat-main { flex: 1; display: flex; flex-direction: column; }
        .chat-messages { flex: 1; padding: 20px; overflow-y: auto; }
        .chat-message { margin-bottom: 16px; padding: 12px 16px; border-radius: 12px; max-width: 80%; }
        .chat-message.user { background: #238636; color: white; margin-left: auto; }
        .chat-message.ai { background: #21262d; color: #c9d1d9; }
        .chat-input-area { padding: 16px; background: #161b22; border-top: 1px solid #30363d; display: flex; gap: 12px; }
        .chat-input { flex: 1; padding: 12px 16px; border-radius: 8px; border: 1px solid #30363d; background: #0d1117; color: #c9d1d9; font-size: 14px; }
        .chat-input:focus { outline: none; border-color: #58a6ff; }
        .chat-send-btn { padding: 12px 24px; background: #238636; border: none; border-radius: 8px; color: white; cursor: pointer; font-size: 14px; }
        .chat-send-btn:hover { background: #2ea043; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">âš¡ MechDesign</div>
        <div class="nav">
            <div class="nav-item active" onclick="showPage('home')">ğŸ  é¦–é¡µ</div>
            <div class="nav-item" onclick="showPage('tools')">ğŸ› ï¸ å·¥å…·</div>
            <div class="nav-item" onclick="showPage('chat')">ğŸ’¬ èŠå¤©</div>
            <div class="nav-item" onclick="showPage('ai')">ğŸ¤– AI</div>
        </div>
    </div>
    <div class="container" id="home-page">
        <div class="click-hint">ğŸ’¡ ç‚¹å‡»ä»»æ„æ¨¡å—å¡ç‰‡ç›´æ¥æ‰§è¡Œå‘½ä»¤</div>
        <div class="hero">
            <h1>MechDesign</h1>
            <p>ä¸“ä¸šçš„æœºæ¢°è®¾è®¡è¾…åŠ©å·¥å…·</p>
            <div class="action-btns">
                <button class="action-btn" onclick="runCmd('cae-cli --help')">æŸ¥çœ‹å¸®åŠ©</button>
                <button class="action-btn" onclick="runCmd('cae-cli info')">ç³»ç»Ÿä¿¡æ¯</button>
                <button class="action-btn" onclick="runCmd('cae-cli material --list')">ææ–™åˆ—è¡¨</button>
            </div>
        </div>
        <div class="modules">
            <div class="module-card" onclick="runCmd('cae-cli parse --help')">
                <div class="module-icon">ğŸ“</div>
                <div class="module-title">å‡ ä½•è§£æ</div>
                <div class="module-desc">è§£æSTEPã€STLã€IGES</div>
                <div class="module-cmd">cae-cli parse model.step</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli analyze --help')">
                <div class="module-icon">ğŸ”²</div>
                <div class="module-title">ç½‘æ ¼åˆ†æ</div>
                <div class="module-desc">åˆ†ææœ‰é™å…ƒç½‘æ ¼è´¨é‡</div>
                <div class="module-cmd">cae-cli analyze mesh.msh</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli material --help')">
                <div class="module-icon">ğŸ”§</div>
                <div class="module-title">ææ–™æŸ¥è¯¢</div>
                <div class="module-desc">æŸ¥è¯¢ææ–™æ•°æ®åº“</div>
                <div class="module-cmd">cae-cli material Q235</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli optimize --help')">
                <div class="module-icon">âš¡</div>
                <div class="module-title">å‚æ•°ä¼˜åŒ–</div>
                <div class="module-desc">è‡ªåŠ¨è°ƒæ•´è®¾è®¡å‚æ•°</div>
                <div class="module-cmd">cae-cli optimize</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli workflow --help')">
                <div class="module-icon">ğŸ”„</div>
                <div class="module-title">CAEå·¥ä½œæµ</div>
                <div class="module-desc">å®Œæ•´CADâ†’CAEæµç¨‹</div>
                <div class="module-cmd">cae-cli workflow</div>
            </div>
            <div class="module-card" onclick="showPage('chat')">
                <div class="module-icon">ğŸ¤–</div>
                <div class="module-title">AIåŠ©æ‰‹</div>
                <div class="module-desc">æ™ºèƒ½å¯¹è¯åŠ©æ‰‹</div>
                <div class="module-cmd">ç‚¹å‡»è¿›å…¥èŠå¤©</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli handbook --help')">
                <div class="module-icon">ğŸ“š</div>
                <div class="module-title">çŸ¥è¯†åº“</div>
                <div class="module-desc">æœºæ¢°è®¾è®¡çŸ¥è¯†</div>
                <div class="module-cmd">cae-cli handbook</div>
            </div>
            <div class="module-card" onclick="runCmd('cae-cli interactive --help')">
                <div class="module-icon">ğŸ’¬</div>
                <div class="module-title">äº¤äº’æ¨¡å¼</div>
                <div class="module-desc">èœå•å¼äº¤äº’</div>
                <div class="module-cmd">cae-cli interactive</div>
            </div>
        </div>
    </div>
    <div class="container" id="tools-page" style="display:none;">
        <h2 style="font-size:24px;margin-bottom:24px;">ğŸ› ï¸ å·¥å…·æ¨¡å—</h2>
        <div class="modules">
            <div class="module-card" onclick="runCmd('cae-cli parse --help')"><div class="module-icon">ğŸ“</div><div class="module-title">å‡ ä½•è§£æ</div></div>
            <div class="module-card" onclick="runCmd('cae-cli analyze --help')"><div class="module-icon">ğŸ”²</div><div class="module-title">ç½‘æ ¼åˆ†æ</div></div>
            <div class="module-card" onclick="runCmd('cae-cli material --help')"><div class="module-icon">ğŸ”§</div><div class="module-title">ææ–™æŸ¥è¯¢</div></div>
            <div class="module-card" onclick="runCmd('cae-cli report --help')"><div class="module-icon">ğŸ“Š</div><div class="module-title">æŠ¥å‘Šç”Ÿæˆ</div></div>
        </div>
    </div>
    <div id="chat-page">
        <div class="chat-container">
            <div class="chat-sidebar">
                <h3>ğŸ’¬ AI èŠå¤©</h3>
                <div class="chat-sidebar-item active">ğŸ¤– æ™ºèƒ½åŠ©æ‰‹</div>
                <div class="chat-sidebar-item">ğŸ“ CADé—®é¢˜</div>
                <div class="chat-sidebar-item">ğŸ”§ ææ–™å’¨è¯¢</div>
                <div class="chat-sidebar-item">âš¡ ä¼˜åŒ–å»ºè®®</div>
                <div class="chat-quick-commands">
                    <div class="chat-quick-commands-title">å¿«æ·å‘½ä»¤</div>
                    <div class="chat-sidebar-item" onclick="runCmd('cae-cli ai generate')">ğŸ² AIç”Ÿæˆ</div>
                    <div class="chat-sidebar-item" onclick="runCmd('cae-cli ai suggest')">ğŸ’¡ AIå»ºè®®</div>
                </div>
            </div>
            <div class="chat-main">
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-message ai">ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯MechDesign AIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ ï¼š<br><br>â€¢ è§£ç­”CAD/CAEé—®é¢˜<br>â€¢ æä¾›ææ–™é€‰å‹å»ºè®®<br>â€¢ è¾…åŠ©ç½‘æ ¼åˆ’åˆ†<br>â€¢ ä¼˜åŒ–è®¾è®¡å‚æ•°<br><br>è¯·åœ¨ä¸‹æ–¹è¾“å…¥ä½ çš„é—®é¢˜...</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" id="chat-input" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." onkeypress="if(event.key==='Enter')sendChat()">
                    <button class="chat-send-btn" onclick="sendChat()">å‘é€</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container" id="ai-page" style="display:none;">
        <h2 style="font-size:24px;margin-bottom:24px;">ğŸ¤– AIæ¨¡å—</h2>
        <div class="modules">
            <div class="module-card" onclick="showPage('chat')"><div class="module-icon">ğŸ’¬</div><div class="module-title">æ™ºèƒ½å¯¹è¯</div><div class="module-desc">è¿›å…¥AIèŠå¤©ç•Œé¢</div></div>
            <div class="module-card" onclick="runCmd('cae-cli ai generate --help')"><div class="module-icon">ğŸ²</div><div class="module-title">AIç”Ÿæˆ</div></div>
            <div class="module-card" onclick="runCmd('cae-cli ai suggest --help')"><div class="module-icon">ğŸ’¡</div><div class="module-title">AIå»ºè®®</div></div>
        </div>
    </div>
    <script>
        var bridge = null;
        
        // QWebChannel åˆå§‹åŒ–
        if (typeof QWebChannel !== 'undefined') {
            new QWebChannel(qt.webChannelTransport, function(channel) {
                bridge = channel.objects.bridge;
                console.log('Bridge initialized:', bridge);
                // éšè—åŠ è½½æç¤º
                var hint = document.querySelector('.click-hint');
                if (hint) {
                    hint.textContent = 'âœ… QWebChannel å·²è¿æ¥ - ç‚¹å‡»å¡ç‰‡æ‰§è¡Œå‘½ä»¤';
                    hint.style.background = 'rgba(35, 134, 54, 0.2)';
                    hint.style.borderColor = 'rgba(35, 134, 54, 0.5)';
                }
            });
        } else {
            console.error('QWebChannel not available');
        }
        
        // æ‰§è¡Œå‘½ä»¤
        function runCmd(cmd) {
            if (bridge) {
                console.log('Executing:', cmd);
                bridge.runCommand(cmd);
            } else {
                alert('Bridge not initialized, please wait...');
            }
        }
        
        function showPage(pageId) {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('tools-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('ai-page').style.display = 'none';
            document.getElementById(pageId + '-page').style.display = 'block';
            document.querySelectorAll('.nav-item').forEach(function(item) { item.classList.remove('active'); });
            event.target.classList.add('active');
        }
        
        function sendChat() {
            var input = document.getElementById('chat-input');
            var msg = input.value.trim();
            if (!msg) return;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            var messages = document.getElementById('chat-messages');
            messages.innerHTML += '<div class="chat-message user">' + msg + '</div>';
            
            // æ¸…ç©ºè¾“å…¥
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
            
            // è°ƒç”¨CLIæ‰§è¡ŒAIèŠå¤©
            if (bridge) {
                bridge.runCommand('cae-cli chat "' + msg + '"');
            }
        }
    </script>
</body>
</html>
